(()=>{"use strict";new class{constructor(){this.addNote=document.querySelector(".button"),this.container=document.querySelector(".container"),this.modal=new class{constructor(e){this.modal=document.querySelector(".modal"),this.textarea=document.querySelector(".textarea"),this.closeBtn=document.querySelector(".close"),this.helper=new class{createElement(e){const t=document.createElement("div");return t.classList.add("js-note"),t.style.transform=`rotate(${this.plusMinus()}${4*Math.random()}deg)`,t.style.backgroundColor=this.backGroundColor(),t.insertAdjacentHTML("beforeend",`<span>${e}</span>`),t.insertAdjacentHTML("beforeend",'<div class="remove">&#10006;<span>Стик можно удалить двойным кликом</span></div>'),t}plusMinus(){return Math.random()<=.5?"-":"+"}backGroundColor(){const e="0123456789abcdef";let t="";for(let a=0;a<6;a++){let a=Math.floor(Math.random()*e.length);t+=e.substring(a,a+1)}return`#${t}`}},this.addNewNote=e}openModal(){this.modal.classList.add("open"),this.textarea.focus()}closeModal(){this.modal.classList.remove("open"),this.textarea.value=""}addNewNoteEvent(){this.textarea.addEventListener("keydown",(e=>{if("Enter"===e.key&&!e.shiftKey){if(this.textarea.value.trim()){let e=this.helper.createElement(this.textarea.value);this.addNewNote(e)}this.closeModal()}}))}addCloseEvent(){this.closeBtn.addEventListener("click",(()=>this.closeModal())),this.modal.addEventListener("click",(e=>{e.target==this.textarea||this.textarea.value.trim()||this.closeModal()})),this.textarea.addEventListener("keydown",(e=>{"Escape"==e.key&&this.modal.classList.contains("open")&&this.closeModal()}))}}(this.addNewNote.bind(this)),this.addClickAndKeyEvent()}addClickAndKeyEvent(){this.addNote.addEventListener("click",(()=>this.modal.openModal())),this.modal.addNewNoteEvent(),this.modal.addCloseEvent(),this.container.addEventListener("dblclick",(e=>{e.target.parentNode.classList.contains("js-note")&&this.container.removeChild(e.target.parentNode)})),this.container.addEventListener("click",(e=>{e.target.classList.contains("remove")&&this.container.removeChild(e.target.parentNode)}))}addNewNote(e){this.container.appendChild(e)}}})();